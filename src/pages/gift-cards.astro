---
import Layout from '../layouts/Layout.astro';
import PageHero from '../components/PageHero.astro';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Gift, Calendar, Heart, Star, Check, Clock, ExternalLink, CreditCard, HelpCircle, ChevronDown } from 'lucide-react';
import { getGiftCardData } from '../lib/sanity';
import SanityPortableText from '@/components/SanityPortableText';
import EnhancedGiftCards from '@/components/EnhancedGiftCards';

// Fetch gift card data
const giftCardData = await getGiftCardData();

// Icon mapping
const iconMap = {
  gift: Gift,
  calendar: Calendar,
  heart: Heart,
  star: Star,
  check: Check,
  clock: Clock
};

const title = "Gift Cards - WH Pubs";
const description = "Give the gift of great times at WH Pubs. Perfect for birthdays, celebrations, or just because.";
---

<Layout title={title} description={description}>
  <PageHero
    title={giftCardData?.heroTitle || "Gift Cards"}
    subtitle={giftCardData?.heroSubtitle || "The perfect gift for any occasion"}
    image={giftCardData?.heroImage || {
      asset: { url: '/images/hero-fallback.jpg' },
      alt: 'WH Pubs Gift Cards'
    }}
  />

  <main>
    {/* Enhanced Gift Cards Component */}
    <section class="py-16">
      <div class="container mx-auto px-4">
        <EnhancedGiftCards client:load />
      </div>
    </section>

    {/* Legacy content removed - now handled by EnhancedGiftCards component */}
  </main>
</Layout>

<style>
  details summary::-webkit-details-marker {
    display: none;
  }
  
  details[open] summary {
    border-color: var(--secondary);
  }
</style>